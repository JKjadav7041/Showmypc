<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShowMyPc | Troubleshooting Guide</title>
    <link rel="icon" sizes="32x32" href="./images/tab2.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        /* Dark Theme Base */
        html{
            scroll-behavior: smooth;
        }
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #09090b;
            color: #f8fafc; 
        }
        
        /* Dark Glass Navbar */
        .glass-nav {
            background: rgba(9, 9, 11, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Dropdown Visibility Logic */
        .dropdown-menu {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .dropdown-menu.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Mobile Menu Sidebar */
        #mobile-menu {
            transition: transform 0.3s ease-in-out;
        }
        .menu-open { transform: translateX(0) !important; }

        /* Custom Shimmer Effect */
        .text-shimmer {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #3b82f6);
            background-size: 200% auto;
             background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }
        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        /* Smooth content animations */
        .content-section {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
            margin-bottom: 2rem;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Staggered animations */
        .content-section:nth-child(1) { animation-delay: 0.1s; }
        .content-section:nth-child(2) { animation-delay: 0.2s; }
        .content-section:nth-child(3) { animation-delay: 0.3s; }
        .content-section:nth-child(4) { animation-delay: 0.4s; }
        .content-section:nth-child(5) { animation-delay: 0.5s; }
        .content-section:nth-child(6) { animation-delay: 0.6s; }
        .content-section:nth-child(7) { animation-delay: 0.7s; }
        .content-section:nth-child(8) { animation-delay: 0.8s; }
        .content-section:nth-child(9) { animation-delay: 0.9s; }
        .content-section:nth-child(10) { animation-delay: 1.0s; }

        /* Step numbering */
        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }

        .step-list li {
            counter-increment: step-counter;
            position: relative;
            padding-left: 3rem;
            margin-bottom: 1.5rem;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.875rem;
        }

        /* AI Assistant Styles - FIXED LAYOUT */
        .ai-assistant-container {
            max-width: 1200px;
            margin: 0 auto 4rem auto;
            padding: 0 1.5rem;
        }

        .ai-prompt-bar {
            background: linear-gradient(135deg, #1e1b4b 0%, #1e3a8a 50%, #312e81 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 1.5rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            min-height: 100px;
            display: flex;
            flex-direction: column;
        }

        .ai-prompt-bar:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .ai-prompt-bar.expanded {
            padding: 2rem;
            max-height: 800px;
            cursor: default;
            overflow-y: auto;
        }

        /* Hide original header when expanded */
        .ai-header-collapsed {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .ai-prompt-bar.expanded .ai-header-collapsed {
            display: none;
        }

        /* Expanded header */
        .ai-header-expanded {
            display: none;
            margin-bottom: 1.5rem;
        }

        .ai-prompt-bar.expanded .ai-header-expanded {
            display: flex;
            align-items: center;
            gap: 1rem;
            animation: fadeIn 0.5s ease-out;
        }

        .ai-icon {
            width: 3rem;
            height: 3rem;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            flex-shrink: 0;
        }

        .ai-title {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .ai-subtitle {
            color: #c7d2fe;
            font-size: 0.95rem;
            margin-top: 0.25rem;
        }

        /* Main content area - always stays in place */
        .ai-main-content {
            display: none;
            flex-direction: column;
            gap: 1.5rem;
        }

        .ai-prompt-bar.expanded .ai-main-content {
            display: flex;
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Prompt Input Area */
        .prompt-input-area {
            background: rgba(15, 23, 42, 0.7);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 1rem;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }

        .prompt-input-area:focus-within {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
            background: rgba(15, 23, 42, 0.9);
        }

        .prompt-input {
            width: 100%;
            background: transparent;
            border: none;
            color: white;
            font-size: 1rem;
            font-family: 'Plus Jakarta Sans', sans-serif;
            resize: none;
            min-height: 100px;
            outline: none;
            line-height: 1.6;
        }

        .prompt-input::placeholder {
            color: #94a3b8;
        }

        /* AI Response Area - appears below input */
        .ai-response-area {
            display: none;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            animation: fadeIn 0.5s ease-out;
        }

        .ai-response-area.show {
            display: block;
        }

        .response-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .response-icon {
            width: 2rem;
            height: 2rem;
            background: linear-gradient(135deg, #10b981, #34d399);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
            flex-shrink: 0;
        }

        .response-title {
            font-weight: 700;
            color: #34d399;
            font-size: 1.1rem;
        }

        .response-content {
            color: #e2e8f0;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 1rem;
        }

        .response-content::-webkit-scrollbar {
            width: 6px;
        }

        .response-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .response-content::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 3px;
        }

        /* Controls Area - always at bottom */
        .ai-controls-area {
            display: none;
            margin-top: auto;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ai-prompt-bar.expanded .ai-controls-area {
            display: block;
        }

        .ai-controls {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .ai-button {
            padding: 0.75rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-button-primary {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
        }

        .ai-button-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #2563eb, #4f46e5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .ai-button-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #cbd5e1;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ai-button-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .ai-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Cursor hint */
        .cursor-hint {
            position: absolute;
            bottom: 1.5rem;
            right: 2rem;
            color: #94a3b8;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            transition: opacity 0.3s ease;
        }

        .ai-prompt-bar.expanded .cursor-hint {
            opacity: 0;
        }

        /* Memory indicator */
        .memory-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.875rem;
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
        }

        .memory-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Typing indicator */
        .typing-indicator {
            display: flex;
            gap: 0.25rem;
            padding: 0.5rem;
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #60a5fa;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .ai-assistant-container {
                padding: 0 1rem;
            }
            
            .ai-prompt-bar {
                padding: 1rem;
                border-radius: 1rem;
            }
            
            .ai-prompt-bar.expanded {
                padding: 1.5rem;
            }
            
            .ai-icon {
                width: 2.5rem;
                height: 2.5rem;
                font-size: 1.25rem;
            }
            
            .ai-title {
                font-size: 1.25rem;
            }
            
            .ai-subtitle {
                font-size: 0.85rem;
            }
            
            .ai-controls {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .ai-button {
                width: 100%;
                justify-content: center;
                padding: 0.75rem 1rem;
            }
            
            .prompt-input-area {
                padding: 1rem;
            }
            
            .prompt-input {
                min-height: 80px;
                font-size: 0.95rem;
            }
            
            .ai-response-area {
                padding: 1rem;
            }
            
            .response-content {
                max-height: 250px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .ai-title {
                font-size: 1.1rem;
            }
            
            .ai-subtitle {
                font-size: 0.8rem;
            }
            
            .ai-icon {
                width: 2rem;
                height: 2rem;
                font-size: 1rem;
            }
            
            .prompt-input {
                min-height: 70px;
                font-size: 0.9rem;
            }
            
            .memory-indicator {
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Your existing header remains same -->
    <header class="glass-nav fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            
            <div class="flex items-center space-x-2">
                <div class="w-9 h-9 bg-blue-600 text-white rounded-lg flex items-center justify-center font-extrabold text-xl shadow-lg shadow-blue-900/20">S</div>
                <span class="text-2xl font-extrabold tracking-tight text-white">ShowMyPc</span>
            </div>

            <nav class="hidden lg:flex items-center space-x-10 text-sm font-bold uppercase tracking-wide text-zinc-400">
                <a href="index.html" class="hover:text-blue-500 transition-colors">Home</a>
                <a href="index.html#developer" class="hover:text-blue-500 transition-colors">Developer</a>
                <a href="./3d.html" class="hover:text-blue-500 transition-colors">3D-Models</a>
                
                <div class="relative dropdown">
                    <button onclick="toggleDropdown(event)" class="hover:text-blue-500 transition-colors flex items-center gap-1">
                        Learning <svg class="w-4 h-4 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                    <div id="learning-menu" class="dropdown-menu absolute top-full left-0 mt-2 w-56 bg-zinc-900 border border-white/10 rounded-xl p-2 shadow-2xl">
                        <a href="./Port_and_connector.html" class="block px-4 py-3 hover:bg-white/5 hover:text-blue-400 rounded-lg transition text-zinc-300">Port & Connector</a>
                        <a href="./motherboard.html" class="block px-4 py-3 hover:bg-white/5 hover:text-blue-400 rounded-lg transition text-zinc-300">Motherboard</a>
                    </div>
                </div>

                <a href="#" class="text-red-500 hover:text-red-400 transition-colors">T-shooting</a>
            </nav>

            <button onclick="toggleMenu()" class="lg:hidden p-2 text-white">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-width="2" stroke-linecap="round"/></svg>
            </button>
        </div>
    </header>

    <!-- Mobile Menu (same as before) -->
    <div id="mobile-menu" class="fixed inset-y-0 right-0 w-64 bg-zinc-950 z-[60] transform translate-x-full lg:hidden border-l border-white/10 p-8 flex flex-col space-y-6 text-lg font-bold shadow-2xl">
        <button onclick="toggleMenu()" class="self-end mb-4 text-zinc-500 font-normal hover:text-white">âœ• Close</button>
        <a href="index.html" class="text-white hover:text-blue-500">Home</a>
        <a href="index.html#developer" class="text-white hover:text-blue-500">Developer</a>
        <a href="./3d.html" class="text-white hover:text-blue-500">3D-Models</a>
        <div class="border-t border-white/5 pt-4 space-y-4">
            <p class="text-blue-500 text-xs uppercase tracking-widest">Learning</p>
            <a href="./Port_and_connector.html" class="block text-sm text-zinc-400 hover:text-white">Port & Connector</a>
            <a href="./motherboard.html" class="block text-sm text-zinc-400 hover:text-white">Motherboard</a>
        </div>
        <a href="#" class="text-red-500 hover:text-red-400">T-shooting</a>
    </div>

    <!-- Page Header -->
    <section class="pt-32 pb-16 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <h2 class="text-red-500 font-bold uppercase tracking-[0.3em] text-xs mb-4">Computer Troubleshooting</h2>
            <h1 class="text-5xl md:text-6xl lg:text-7xl font-black leading-[1.1] tracking-tighter mb-6 text-white">
                <span class="text-shimmer">Fix Common PC Problems</span>
            </h1>
            <p class="text-zinc-400 text-lg max-w-3xl mx-auto leading-relaxed">
                Step-by-step solutions to the most common computer problems. From hardware issues to software errors, we've got you covered.
            </p>
        </div>
    </section>

    <!-- AI Assistant Section - FIXED LAYOUT -->
    <div class="ai-assistant-container">
        <div class="ai-prompt-bar" id="aiPromptBar" onclick="expandAIPrompt(event)">
            <!-- Collapsed State Header -->
            <div class="ai-header-collapsed">
                <div class="ai-icon">AI</div>
                <div>
                    <h2 class="ai-title">PC Troubleshooting AI Assistant</h2>
                    <p class="ai-subtitle">Click to ask specific questions about PC problems not covered below</p>
                </div>
            </div>
            
            <!-- Cursor Hint -->
            <div class="cursor-hint">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7m14-8l-7 7-7-7"/>
                </svg>
                Click to expand
            </div>
            
            <!-- Expanded State Header -->
            <div class="ai-header-expanded">
                <div class="ai-icon">AI</div>
                <div>
                    <h2 class="ai-title">PC Troubleshooting AI Assistant</h2>
                    <p class="ai-subtitle">Describe your PC problem and get AI-powered solutions</p>
                </div>
            </div>
            
            <!-- Main Content Area (shown when expanded) -->
            <div class="ai-main-content">
                <!-- Prompt Input Area -->
                <div class="prompt-input-area">
                    <textarea 
                        id="aiPromptInput" 
                        class="prompt-input" 
                        placeholder="Describe your PC problem in detail (e.g., 'My computer makes a beeping sound on startup and won't display anything')"
                        maxlength="1000"
                    ></textarea>
                    
                    <div class="memory-indicator">
                        <div class="memory-dot"></div>
                        <span>Context-aware: Remembers previous questions for better assistance</span>
                    </div>
                </div>
                
                <!-- AI Response Area -->
                <div class="ai-response-area" id="aiResponse">
                    <div class="response-header">
                        <div class="response-icon">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 1118 0 9 9 0 01-18 0z"/>
                            </svg>
                        </div>
                        <div class="response-title">AI Response</div>
                    </div>
                    <div class="response-content" id="aiResponseContent"></div>
                </div>
                
                <!-- Controls Area -->
                <div class="ai-controls-area">
                    <div class="ai-controls">
                        <button class="ai-button ai-button-secondary" onclick="clearAIChat()">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                            Clear Chat
                        </button>
                        <button class="ai-button ai-button-primary" onclick="sendAIPrompt()" id="sendAIButton">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                            </svg>
                            Ask AI Assistant
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rest of your troubleshooting sections remain exactly the same -->
    <main class="max-w-7xl mx-auto px-8 pb-24">     
        <section class="content-section">
            <div class="bg-zinc-900/70 border border-white/10 rounded-3xl p-8 md:p-12">
                <div class="mb-8">
                    <div class="inline-block bg-red-500/10 border border-red-500/20 rounded-lg px-4 py-2 mb-4">
                        <span class="text-red-400 font-bold text-sm uppercase tracking-wider">Problem #1</span>
                    </div>
                    <h2 class="text-3xl md:text-4xl font-black mb-4 text-white">
                        Computer Not Turning ON
                    </h2>
                    <p class="text-zinc-400 text-lg mb-6">
                        When your computer doesn't power on at all, it's usually a power supply or hardware connection issue [web:1][web:3].
                    </p>
                </div>

                <div class="bg-black/30 rounded-2xl p-6 border border-white/5">
                    <h3 class="text-xl font-bold text-blue-400 mb-4">Step-by-Step Solution:</h3>
                    <ul class="step-list text-zinc-300">
                        <li>
                            <strong class="text-white">Check the power source:</strong> Verify that the wall outlet is working by testing it with another device like a lamp or monitor [web:3].
                        </li>
                        <li>
                            <strong class="text-white">Inspect power cables:</strong> Ensure the power cable is securely connected to both the computer and the outlet. Check if the power strip is turned on [web:3].
                        </li>
                        <li>
                            <strong class="text-white">Discharge residual power:</strong> Unplug the power cable, hold the power button for 15-20 seconds to drain any remaining power, then reconnect and try again [web:3].
                        </li>
                        <li>
                            <strong class="text-white">Check PSU connections:</strong> Open the case and verify all internal power supply cables are firmly connected to the motherboard and components [web:5].
                        </li>
                        <li>
                            <strong class="text-white">Test the power supply:</strong> If available, use the PSU's Built-In Self-Test (BIST) button or try a different power supply to rule out PSU failure [web:3][web:5].
                        </li>
                        <li>
                            <strong class="text-white">Clear CMOS:</strong> Reset the BIOS by removing the CMOS battery for a few minutes, then reinstalling it [web:5].
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Other troubleshooting sections continue... -->
    </main>

    <script>
        // AI Assistant Variables
        const API_KEY = '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';
        const conversationHistory = [];
        let isExpanded = false;

        // Toggle Desktop Dropdown
        function toggleDropdown(event) {
            event.stopPropagation();
            const menu = document.getElementById('learning-menu');
            menu.classList.toggle('show');
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            const menu = document.getElementById('learning-menu');
            if (menu && menu.classList.contains('show')) {
                menu.classList.remove('show');
            }
        }

        // Toggle Mobile Menu
        function toggleMenu() {
            document.getElementById('mobile-menu').classList.toggle('menu-open');
        }

        // Expand AI Prompt Bar
        function expandAIPrompt(event) {
            const aiBar = document.getElementById('aiPromptBar');
            const promptInput = document.getElementById('aiPromptInput');
            
            if (!isExpanded) {
                aiBar.classList.add('expanded');
                isExpanded = true;
                
                // Focus on input after animation
                setTimeout(() => {
                    promptInput.focus();
                }, 400);
                
                // Prevent clicks inside from closing
                event.stopPropagation();
            }
        }

        // Close AI Prompt Bar when clicking outside
        document.addEventListener('click', function(event) {
            const aiBar = document.getElementById('aiPromptBar');
            const clickedInside = aiBar.contains(event.target);
            
            if (isExpanded && !clickedInside) {
                aiBar.classList.remove('expanded');
                isExpanded = false;
                
                // Hide response when closing
                document.getElementById('aiResponse').classList.remove('show');
            }
        });

        // Send AI Prompt
        async function sendAIPrompt() {
            const promptInput = document.getElementById('aiPromptInput');
            const sendButton = document.getElementById('sendAIButton');
            const responseContent = document.getElementById('aiResponseContent');
            const responseDiv = document.getElementById('aiResponse');
            
            const prompt = promptInput.value.trim();
            
            if (!prompt) {
                alert('Please describe your PC problem first!');
                promptInput.focus();
                return;
            }
            
            // Disable button and show loading
            sendButton.disabled = true;
            sendButton.innerHTML = `
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
                Thinking...
            `;
            
            // Show typing indicator in response
            responseContent.innerHTML = `
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <span style="color: #94a3b8; margin-left: 10px;">AI is analyzing your problem...</span>
                </div>
            `;
            responseDiv.classList.add('show');
            
            // Add to conversation history
            conversationHistory.push({
                role: 'user',
                content: prompt
            });
            
            try {
                // Prepare system context with memory
                const systemContext = {
                    role: 'system',
                    content: `You are a PC troubleshooting expert for ShowMyPc. You help users diagnose and fix computer problems.
                    
                    Previous conversation context: ${conversationHistory.slice(0, -1).map(msg => `${msg.role}: ${msg.content}`).join('\n')}
                    
                    Current user problem: ${prompt}
                    
                    Provide a detailed, step-by-step troubleshooting guide. Include:
                    1. Brief diagnosis of the likely issue
                    2. Step-by-step solutions with clear instructions
                    3. Safety precautions if needed
                    4. When to seek professional help
                    5. Preventive tips
                    
                    Format your response with clear headings and bullet points. Be technical but user-friendly.`
                };
                
                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'HTTP-Referer': 'https://showmypc.com',
                        'X-Title': 'ShowMyPc Troubleshooting',
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'openai/gpt-5.2',
                        messages: [systemContext, ...conversationHistory],
                        max_tokens: 1000,
                        temperature: 0.7,
                    }),
                });
                
                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.choices && data.choices[0]) {
                    const aiResponse = data.choices[0].message.content;
                    
                    // Add AI response to conversation history
                    conversationHistory.push({
                        role: 'assistant',
                        content: aiResponse
                    });
                    
                    // Display formatted response
                    responseContent.innerHTML = formatAIResponse(aiResponse);
                    
                    // Clear input
                    promptInput.value = '';
                    
                    // Scroll response into view
                    responseDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    throw new Error('Invalid response from AI');
                }
                
            } catch (error) {
                console.error('Error:', error);
                responseContent.innerHTML = `
                    <div style="color: #ef4444;">
                        <strong>Error:</strong> Unable to get AI response. Please try again.
                        <br><br>
                        <em>You can still:</em>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            <li>Check the troubleshooting guides above</li>
                            <li>Try again in a few minutes</li>
                            <li>Contact our support team</li>
                        </ul>
                    </div>
                `;
            } finally {
                // Re-enable button
                sendButton.disabled = false;
                sendButton.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                    </svg>
                    Ask AI Assistant
                `;
            }
        }

        // Format AI Response
        function formatAIResponse(text) {
            // Convert markdown-like formatting to HTML
            let formatted = text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/^### (.*$)/gm, '<h3 style="color: #3b82f6; margin-top: 1rem; margin-bottom: 0.5rem; font-size: 1.1rem;">$1</h3>')
                .replace(/^## (.*$)/gm, '<h2 style="color: #60a5fa; margin-top: 1.2rem; margin-bottom: 0.6rem; font-size: 1.2rem;">$1</h2>')
                .replace(/^# (.*$)/gm, '<h1 style="color: #3b82f6; margin-top: 1.5rem; margin-bottom: 0.8rem; font-size: 1.3rem;">$1</h1>')
                .replace(/^\d+\.\s+(.*$)/gm, '<li style="margin-bottom: 0.5rem; padding-left: 1.5rem; position: relative;">$1</li>')
                .replace(/^-\s+(.*$)/gm, '<li style="margin-bottom: 0.5rem; padding-left: 1.5rem; position: relative; list-style-type: disc;">$1</li>')
                .split('\n')
                .map(line => {
                    if (line.startsWith('<')) return line;
                    if (line.trim() === '') return '<br>';
                    return `<p style="margin-bottom: 0.75rem;">${line}</p>`;
                })
                .join('');
            
            return formatted;
        }

        // Clear AI Chat
        function clearAIChat() {
            conversationHistory.length = 0;
            document.getElementById('aiResponseContent').innerHTML = '';
            document.getElementById('aiResponse').classList.remove('show');
            document.getElementById('aiPromptInput').value = '';
            document.getElementById('aiPromptInput').focus();
            
            // Show confirmation
            const responseContent = document.getElementById('aiResponseContent');
            const responseDiv = document.getElementById('aiResponse');
            
            responseContent.innerHTML = `
                <div style="color: #10b981; text-align: center; padding: 1rem;">
                    <strong>Chat cleared!</strong> You can start a new conversation.
                </div>
            `;
            responseDiv.classList.add('show');
            
            setTimeout(() => {
                responseDiv.classList.remove('show');
            }, 2000);
        }

        // Allow Enter key to send (with Shift+Enter for new line)
        document.getElementById('aiPromptInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendAIPrompt();
            }
        });

        // Add scroll animation trigger
        document.addEventListener('DOMContentLoaded', function() {
            // Animate elements when they come into view
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);
            
            // Observe all content sections
            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });
            
            // Auto-focus AI input if URL has parameter
            if (window.location.search.includes('ai=true')) {
                setTimeout(() => {
                    expandAIPrompt({ stopPropagation: () => {} });
                }, 1000);
            }
        });
    </script>
</body>
</html>